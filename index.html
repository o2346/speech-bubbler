<!DOCTYPE html>
<html>
  <body>
    <script src="speech-bubbler.js"></script>
    <script type="text/javascript">
      document.write(
        String().concat(
          '<div>',
          'Under Construction..',
          '</div>',
          '<div style="font-family: monospace">',
          new Bubbler().render( '複線\nドリフト!!' ).replace( /\n/g, '<br>' ),
          '<br>',
          new Bubbler().render( '複線\nドリフト!!!', '?edge=rectanble&propotional=0' ).replace( /\n/g, '<br>' ),
          '<br>',
          new Bubbler().render( 'CREATIVE LIFE STORE\n⊂ﾆﾆ|ＴＯＫＹＵ|ﾆﾆ⊃ \n Eﾆ|ＨＡＮＤＳ|ﾆﾖ  ', '?edge=rectanble&padding=1&align=center&propotional=0' ).replace( /\n/g, '<br>' ),
          '<br>',
          new Bubbler().render( '痔が\nなおります\nように', '?edge=label&vertical=0&padding=0&propotional=0' ).replace( /\n/g, '<br>' ),
          '</div>'
        )
      );
      //https://stackoverflow.com/questions/9838812/how-can-i-open-a-json-file-in-javascript-without-jquery
    function loadJSON(path, success, error)
    {
      var xhr = new XMLHttpRequest();
      xhr.onreadystatechange = function() {
        if (xhr.readyState === XMLHttpRequest.DONE) {
          if (xhr.status === 200) {
            if (success)
              success(JSON.parse(xhr.responseText));
          } else {
            if (error)
              error(xhr);
          }
        }
      };
      xhr.open("GET", path, true);
      xhr.send();
    }

    loadJSON('test/contents.json',
      ( data ) => {
        data.bubblerRender
          .forEach( ( obj ) => {
            return;
            console.log( obj );
            const c = new Bubbler().render( obj.text, obj.option.concat( '&propotional=0' ) );
            console.log( c );
            document.write(
              String().concat(
                '<div style="font-family: monospace">',
                c,
                '<br>',
              ).concat( '</div>' )
            );
          } );
      },
     function(xhr) { console.error(xhr); }
    );
    </script>
  </body>
</html>

